<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Interativo de Imunologia</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        h1, h2 {
            text-align: center;
            color: #2c3e50;
        }
        .section {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            padding: 20px;
            max-width: 800px;
        }
        .question {
            margin-bottom: 20px;
        }
        .question p {
            font-weight: bold;
        }
        .options {
            display: flex;
            flex-direction: column;
        }
        .option {
            background-color: #e7e7e7;
            border: none;
            border-radius: 4px;
            color: #333;
            cursor: pointer;
            margin: 5px 0;
            padding: 10px;
            text-align: left;
            transition: background-color 0.3s;
        }
        .option:hover {
            background-color: #d0d0d0;
        }
        .option.selected {
            background-color: #3498db;
            color: #fff;
        }
        .open-answer {
            width: 100%;
            min-height: 80px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin: 5px 0;
            font-family: Arial, sans-serif;
        }
        .submit-btn {
            background-color: #27ae60;
            border: none;
            border-radius: 4px;
            color: #fff;
            cursor: pointer;
            display: block;
            font-size: 16px;
            margin: 20px auto 0;
            padding: 10px 20px;
            transition: background-color 0.3s;
        }
        .submit-btn:hover {
            background-color: #219653;
        }
        .feedback {
            margin-top: 20px;
            text-align: center;
        }
        .correct {
            color: #27ae60;
        }
        .incorrect {
            color: #e74c3c;
        }
        .result {
            background-color: #ecf0f1;
            border-radius: 4px;
            margin-top: 20px;
            padding: 10px;
        }
        .result ul {
            list-style-type: none;
            padding: 0;
        }
        .result li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>Quiz Interativo de Imunologia</h1>
    <p style="text-align: center;">Este site contém questões interativas sobre imunologia baseadas nos slides de Antígenos, Anticorpos e Introdução ao Sistema Imune. Selecione as respostas e clique em "Verificar" para ver os resultados. Inclui questões de múltipla escolha (nível faculdade+) com 5 por seção e 20 abertas.</p>
    <!-- Seção 1: Funções e Imunidade Inata/Adaptativa -->
    <div class="section" id="section1">
        <h2>Funções do Sistema Imune e Imunidade Inata vs Adaptativa</h2>
        <div id="questions1"></div>
        <button class="submit-btn" onclick="checkAnswers('section1')">Verificar Respostas</button>
        <div class="feedback" id="feedback1"></div>
        <div class="result" id="result1" style="display: none;"></div>
    </div>
    <!-- Seção 2: Células e Órgãos do SI -->
    <div class="section" id="section2">
        <h2>Células e Órgãos do Sistema Imune</h2>
        <div id="questions2"></div>
        <button class="submit-btn" onclick="checkAnswers('section2')">Verificar Respostas</button>
        <div class="feedback" id="feedback2"></div>
        <div class="result" id="result2" style="display: none;"></div>
    </div>
    <!-- Seção 3: Definição, Tipos e Epítopos de Antígenos -->
    <div class="section" id="section3">
        <h2>Definição, Tipos e Epítopos de Antígenos</h2>
        <div id="questions3"></div>
        <button class="submit-btn" onclick="checkAnswers('section3')">Verificar Respostas</button>
        <div class="feedback" id="feedback3"></div>
        <div class="result" id="result3" style="display: none;"></div>
    </div>
    <!-- Seção 4: Antigenicidade, Imunogenicidade e Fatores -->
    <div class="section" id="section4">
        <h2>Antigenicidade, Imunogenicidade e Fatores Influenciadores</h2>
        <div id="questions4"></div>
        <button class="submit-btn" onclick="checkAnswers('section4')">Verificar Respostas</button>
        <div class="feedback" id="feedback4"></div>
        <div class="result" id="result4" style="display: none;"></div>
    </div>
    <!-- Seção 5: Anticorpos, Haptenos, Superantígenos e Mecanismos -->
    <div class="section" id="section5">
        <h2>Anticorpos, Haptenos, Superantígenos e Mecanismos de Ação</h2>
        <div id="questions5"></div>
        <button class="submit-btn" onclick="checkAnswers('section5')">Verificar Respostas</button>
        <div class="feedback" id="feedback5"></div>
        <div class="result" id="result5" style="display: none;"></div>
    </div>
    <!-- Seção 6: Questões Abertas (20 no total) -->
    <div class="section" id="section6">
        <h2>Questões Abertas (Nível Avançado)</h2>
        <p>Responda livremente nas caixas de texto. Verificação parcial baseada em palavras-chave.</p>
        <div id="questions6"></div>
        <button class="submit-btn" onclick="checkAnswers('section6')">Verificar Respostas</button>
        <div class="feedback" id="feedback6"></div>
        <div class="result" id="result6" style="display: none;"></div>
    </div>
    <script>
        // Função para embaralhar array (Fisher-Yates shuffle)
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        // Pools: ~20-25 MC por seção (gerar 5 aleatórias), todas em PT-BR, baseadas nos slides
        const questionPools = {
            section1: [
                { type: 'mc', q: "Qual das seguintes NÃO é uma função principal do Sistema Imune?", options: ["A: Resistência às infecções", "B: Tolerância ao próprio", "C: Rejeição de transplantes", "D: Produção de vitaminas"], correct: "D" },
                { type: 'mc', q: "A imunidade inata é caracterizada por ser:", options: ["A: Específica e com memória", "B: Constitutiva e imediata", "C: Lenta e humoral apenas", "D: Dependente de linfócitos T"], correct: "B" },
                { type: 'mc', q: "A resposta imune adaptativa possui:", options: ["A: Especificidade e memória", "B: Apenas inflamação", "C: Ausência de diversidade", "D: Sem tolerância"], correct: "A" },
                { type: 'mc', q: "A imunidade humoral envolve principalmente:", options: ["A: Linfócitos B e anticorpos", "B: Linfócitos T citotóxicos", "C: Fagócitos inatos", "D: Barreiras físicas"], correct: "A" },
                { type: 'mc', q: "A imunidade passiva natural ocorre via:", options: ["A: Gestação e lactação", "B: Vacinação", "C: Infecção natural", "D: Soros artificiais"], correct: "A" },
                { type: 'mc', q: "Fatores como idade e microbiota influenciam:", options: ["A: Resposta à vacinação", "B: Apenas inata", "C: Sem impacto adaptativa", "D: Tolerância apenas"], correct: "A" },
                { type: 'mc', q: "A resposta imune celular é mediada por:", options: ["A: Linfócitos T em cooperação", "B: Apenas anticorpos", "C: Complemento", "D: Basófilos"], correct: "A" },
                { type: 'mc', q: "A imunidade ativa artificial é:", options: ["A: Imunização/vacinação", "B: Transferência de anticorpos", "C: Exposição natural", "D: Tolerância induzida"], correct: "A" },
                { type: 'mc', q: "O controle de tumores é função do SI via:", options: ["A: Vigilância imune adaptativa", "B: Apenas inata", "C: Sem linfócitos", "D: Inflamação crônica"], correct: "A" },
                { type: 'mc', q: "A resposta primária é mais lenta que a secundária devido a:", options: ["A: Expansão clonal inicial", "B: Memória prévia", "C: Ausência de APCs", "D: Tolerância"], correct: "A" },
                { type: 'mc', q: "Inflamação e defesa antiviral são reações protetoras da:", options: ["A: Imunidade inata", "B: Adaptativa apenas", "C: Humoral", "D: Passiva"], correct: "A" },
                { type: 'mc', q: "A magnitude da resposta adaptativa aumenta com:", options: ["A: Exposições repetidas", "B: Dose única baixa", "C: Tolerância", "D: Sem memória"], correct: "A" },
                { type: 'mc', q: "A não reatividade ao próprio é propriedade da:", options: ["A: Imunidade adaptativa", "B: Inata apenas", "C: Ambas", "D: Nenhuma"], correct: "A" },
                { type: 'mc', q: "A imunidade inata alerta a adaptativa via:", options: ["A: Citocinas e APCs", "B: Anticorpos diretos", "C: TCR isolado", "D: Sem interação"], correct: "A" },
                { type: 'mc', q: "Exemplos de imunidade passiva artificial incluem:", options: ["A: Soros imunes", "B: Infecção", "C: Vacina viva", "D: Memória natural"], correct: "A" },
                { type: 'mc', q: "A resposta imune secundária é caracterizada por:", options: ["A: Pico mais alto e rápido", "B: Ausência de memória", "C: Baixa afinidade", "D: Sem expansão"], correct: "A" },
                { type: 'mc', q: "Fatores comportamentais como estresse influenciam:", options: ["A: Resposta imune à vacinação", "B: Apenas inata", "C: Sem efeito", "D: Tolerância apenas"], correct: "A" },
                { type: 'mc', q: "A imunidade celular difere da humoral por envolver:", options: ["A: Cooperação T com outras células", "B: Apenas IgM", "C: Barreiras inatas", "D: Sem especificidade"], correct: "A" },
                { type: 'mc', q: "A tolerância é essencial para prevenir:", options: ["A: Autoimunidade", "B: Infecções", "C: Transplantes", "D: Tumores"], correct: "A" },
                { type: 'mc', q: "A imunidade inata é a primeira linha de defesa contra:", options: ["A: Qualquer patógeno", "B: Apenas virais", "C: Autoantígenos", "D: Vacinas"], correct: "A" },
                { type: 'mc', q: "A memória imune permite respostas mais intensas em:", options: ["A: Reexposições", "B: Primárias", "C: Tolerância", "D: Inata"], correct: "A" },
                { type: 'mc', q: "A rejeição de transplantes é mediada por:", options: ["A: Reconhecimento como não próprio", "B: Tolerância natural", "C: Inata apenas", "D: Sem MHC"], correct: "A" }
            ],
            section2: [
                { type: 'mc', q: "Qual célula é principal APC?", options: ["A: Célula dendrítica", "B: Neutrófilo", "C: Eritrócito", "D: Plaquetas"], correct: "A" },
                { type: 'mc', q: "Linfócitos T CD4+ são:", options: ["A: Helpers/auxiliares", "B: Citotóxicos", "C: Reguladores apenas", "D: NK"], correct: "A" },
                { type: 'mc', q: "Órgão primário para maturação de linfócitos B é:", options: ["A: Medula óssea", "B: Timo", "C: Baço", "D: Linfonodo"], correct: "A" },
                { type: 'mc', q: "Macrófagos teciduais incluem:", options: ["A: Células de Kupffer no fígado", "B: Neutrófilos no sangue", "C: Eosinófilos em alergia", "D: Basófilos em mastócitos"], correct: "A" },
                { type: 'mc', q: "Linfócitos NK são da imunidade:", options: ["A: Inata, contra vírus e tumores", "B: Adaptativa humoral", "C: Celular T", "D: Sem receptores"], correct: "A" },
                { type: 'mc', q: "O timo é essencial para maturação de:", options: ["A: Linfócitos T", "B: B", "C: NK", "D: Monócitos"], correct: "A" },
                { type: 'mc', q: "Baço filtra antígenos da:", options: ["A: Circulação sanguínea", "B: Linfática apenas", "C: Urina", "D: Bile"], correct: "A" },
                { type: 'mc', q: "Neutrófilos são granulócitos para:", options: ["A: Fagocitose", "B: Parasitas", "C: Alergia", "D: Apresentação"], correct: "A" },
                { type: 'mc', q: "Órgãos secundários incluem:", options: ["A: Linfonodos e baço", "B: Medula e timo", "C: Fígado", "D: Rim"], correct: "A" },
                { type: 'mc', q: "Eosinófilos defendem contra:", options: ["A: Parasitas e alergia", "B: Bactérias", "C: Vírus", "D: Tumores"], correct: "A" },
                { type: 'mc', q: "Placas de Peyer são do SI:", options: ["A: Associado a mucosas (GALT)", "B: Cutâneo", "C: SNC", "D: Ósseo"], correct: "A" },
                { type: 'mc', q: "Linfócitos B produzem:", options: ["A: Anticorpos", "B: Citocinas T", "C: Grânulos NK", "D: Fagossomos"], correct: "A" },
                { type: 'mc', q: "Síndrome de DiGeorge afeta:", options: ["A: Timo e imunodeficiência T", "B: Medula B", "C: Baço", "D: Linfonodos"], correct: "A" },
                { type: 'mc', q: "MALT inclui SI de:", options: ["A: Mucosas e cutâneo", "B: Primários apenas", "C: Sangue", "D: Urina"], correct: "A" },
                { type: 'mc', q: "Basófilos/mastócitos estão em:", options: ["A: Alergias", "B: Fagocitose bacteriana", "C: Apresentação MHC", "D: Memória"], correct: "A" },
                { type: 'mc', q: "Circulação linfática leva linfócitos para:", options: ["A: Órgãos secundários", "B: Primários apenas", "C: Sangue direto", "D: Excreção"], correct: "A" },
                { type: 'mc', q: "Células dendríticas capturam Ag via:", options: ["A: Processos dendríticos", "B: Grânulos eosinofílicos", "C: BCR", "D: TCR"], correct: "A" },
                { type: 'mc', q: "Esplenectomia aumenta risco a:", options: ["A: Bactérias encapsuladas", "B: Vírus", "C: Parasitas", "D: Fungos apenas"], correct: "A" },
                { type: 'mc', q: "Linfócitos T reguladores mantêm:", options: ["A: Tolerância", "B: Inflamação", "C: Proliferação B", "D: Fagocitose"], correct: "A" },
                { type: 'mc', q: "Anel de Waldeyer inclui:", options: ["A: Tonsilas", "B: Baço", "C: Timo", "D: Medula"], correct: "A" },
                { type: 'mc', q: "Hematopoiese ocorre na:", options: ["A: Medula óssea", "B: Timo adulto", "C: Linfonodos", "D: Fígado fetal apenas"], correct: "A" },
                { type: 'mc', q: "Monócitos diferenciam em:", options: ["A: Macrófagos", "B: Linfócitos", "C: Eritrócitos", "D: Plaquetas"], correct: "A" }
            ],
            section3: [
                { type: 'mc', q: "Antígenos são reconhecidos por:", options: ["A: BCR, TCR e anticorpos", "B: Receptores inatos apenas", "C: Complemento", "D: Citocinas"], correct: "A" },
                { type: 'mc', q: "Autoantígenos são:", options: ["A: Próprios do organismo", "B: Apenas estranhos", "C: Patógenos", "D: Ambientais"], correct: "A" },
                { type: 'mc', q: "Epítopo é a:", options: ["A: Região específica reconhecida por Ac ou TCR", "B: Molécula inteira", "C: Hapteno", "D: Superantígeno"], correct: "A" },
                { type: 'mc', q: "Antígenos estranhos incluem:", options: ["A: Patógenos, microbiota, alimentos e ambientais", "B: Apenas auto", "C: MHC próprio", "D: Tolerados sempre"], correct: "A" },
                { type: 'mc', q: "Uma célula pode ser composta por:", options: ["A: Vários antígenos", "B: Um único epítopo", "C: Sem Ag", "D: Apenas DNA"], correct: "A" },
                { type: 'mc', q: "O SI pode não tolerar autoantígenos levando a:", options: ["A: Autoimunidade", "B: Infecção", "C: Vacinação", "D: Tolerância total"], correct: "A" },
                { type: 'mc', q: "Tipos de moléculas antigênicas incluem:", options: ["A: Proteínas, carboidratos, lipídios, ácidos nucleicos", "B: Apenas proteínas", "C: Vitaminas", "D: Minerais"], correct: "A" },
                { type: 'mc', q: "Determinante antigênico é sinônimo de:", options: ["A: Epítopo", "B: Hapteno", "C: Imunógeno", "D: Adjuvante"], correct: "A" },
                { type: 'mc', q: "Antígenos induzem resposta via:", options: ["A: Ligação específica a receptores", "B: Difusão inespecífica", "C: Sem MHC", "D: Apenas inata"], correct: "A" },
                { type: 'mc', q: "Receptores inatos NÃO estão na definição de Ag porque:", options: ["A: São inespecíficos", "B: São específicos como BCR/TCR", "C: Induzem memória", "D: São adaptativos"], correct: "A" },
                { type: 'mc', q: "Epítopos conformacionais dependem de:", options: ["A: Estrutura 3D da proteína", "B: Sequência linear apenas", "C: Denaturação", "D: Sem folding"], correct: "A" },
                { type: 'mc', q: "Antígenos ambientais podem causar:", options: ["A: Alergias", "B: Tolerância sempre", "C: Sem resposta", "D: Apenas infeções"], correct: "A" },
                { type: 'mc', q: "O epítopo induz:", options: ["A: Resposta imune específica", "B: Resposta inespecífica", "C: Tolerância", "D: Sem ligação"], correct: "A" },
                { type: 'mc', q: "Autoantígenos normais são:", options: ["A: Tolerados pelo SI", "B: Sempre imunogênicos", "C: Estranhos", "D: Patogênicos"], correct: "A" },
                { type: 'mc', q: "Antígenos de patógenos incluem:", options: ["A: Proteínas virais ou bacterianas", "B: Apenas carboidratos próprios", "C: DNA mitocondrial", "D: Sem epítopos"], correct: "A" },
                { type: 'mc', q: "Uma célula como Ag é:", options: ["A: Reconhecida por múltiplos epítopos", "B: Um Ag único", "C: Sem Ag", "D: Apenas nuclear"], correct: "A" },
                { type: 'mc', q: "Falha na tolerância a autoantígenos causa:", options: ["A: Doenças autoimunes", "B: Imunodeficiência", "C: Hiperimunidade inata", "D: Sem patologias"], correct: "A" },
                { type: 'mc', q: "Epítopos lineares são:", options: ["A: Sequências contínuas de aa", "B: Apenas conformacionais", "C: Denaturados", "D: Sem ligação Ac"], correct: "A" },
                { type: 'mc', q: "Antígenos alimentares podem ser:", options: ["A: Estranhos e imunogênicos", "B: Sempre tolerados", "C: Auto", "D: Sem epítopos"], correct: "A" },
                { type: 'mc', q: "O reconhecimento de Ag por TCR requer:", options: ["A: Apresentação por MHC", "B: Livre no plasma", "C: Sem APC", "D: Apenas BCR"], correct: "A" },
                { type: 'mc', q: "Microbiota como Ag é:", options: ["A: Estranho, mas tolerado em equilíbrio", "B: Sempre patogênico", "C: Auto", "D: Sem resposta"], correct: "A" }
            ],
            section4: [
                { type: 'mc', q: "Antigenicidade é a capacidade de:", options: ["A: Ligar Ac ou receptores", "B: Induzir resposta imune", "C: Ambas", "D: Nenhuma"], correct: "A" },
                { type: 'mc', q: "Imunogenicidade inclui antigenicidade mais:", options: ["A: Indução de resposta", "B: Apenas ligação", "C: Tolerância", "D: Sem T"], correct: "A" },
                { type: 'mc', q: "Todos imunógenos são antígenos, mas nem todos antígenos são:", options: ["A: Imunógenos", "B: Epítopos", "C: Haptenos", "D: Super Ag"], correct: "A" },
                { type: 'mc', q: "Massa molecular ideal para imunógeno é ~", options: ["A: 100.000 Da", "B: <5.000 Da", "C: 1.000 Da", "D: >200.000 Da"], correct: "A" },
                { type: 'mc', q: "Fatores influenciando imunogenicidade incluem:", options: ["A: Genótipo, dose, adjuvantes", "B: Apenas natureza química", "C: Sem via", "D: Distância filogenética irrelevante"], correct: "A" },
                { type: 'mc', q: "Quanto maior distância filogenética, maior:", options: ["A: Imunogenicidade", "B: Tolerância", "C: Dose baixa", "D: Hapteno"], correct: "A" },
                { type: 'mc', q: "Dose ideal de Ag estimula; dose alta pode causar:", options: ["A: Tolerância", "B: Hiper-resposta", "C: Sem efeito", "D: Adjuvante"], correct: "A" },
                { type: 'mc', q: "Via endovenosa leva Ag ao:", options: ["A: Baço, resposta celular", "B: Linfonodos, humoral", "C: Oral, mucosa", "D: Sem via"], correct: "A" },
                { type: 'mc', q: "Adjuvantes prolongam:", options: ["A: Persistência do Ag e inflamação", "B: Tolerância", "C: Dose baixa", "D: Hapteno"], correct: "A" },
                { type: 'mc', q: "Complexidade química aumenta:", options: ["A: Imunogenicidade", "B: Antigenicidade baixa", "C: Massa pequena", "D: Sem heterogeneidade"], correct: "A" },
                { type: 'mc', q: "Via oral estimula mais:", options: ["A: Resposta humoral mucosa (IgA)", "B: Celular sistêmica", "C: Sem resposta", "D: Tolerância total"], correct: "A" },
                { type: 'mc', q: "Genótipo afeta imunogenicidade via:", options: ["A: MHC e apresentação", "B: Sem influência", "C: Dose única", "D: Adjuvante"], correct: "A" },
                { type: 'mc', q: "Moléculas <10.000 Da são:", options: ["A: Pobres imunógenos", "B: Excelentes", "C: Sempre haptenos", "D: Super Ag"], correct: "A" },
                { type: 'mc', q: "Apresentação por MHC é crucial para:", options: ["A: Ativação T", "B: Apenas B", "C: Inata", "D: Sem TCR"], correct: "A" },
                { type: 'mc', q: "Heterogeneidade química favorece:", options: ["A: Mais epítopos", "B: Menos resposta", "C: Tolerância", "D: Dose alta"], correct: "A" },
                { type: 'mc', q: "Adjuvantes estimulam:", options: ["A: Co-estimuladores em APCs", "B: Tolerância", "C: Haptenos isolados", "D: Sem proliferação"], correct: "A" },
                { type: 'mc', q: "Dose muito baixa não estimula devido a:", options: ["A: Sem detecção por APCs", "B: Hiperativação", "C: Adjuvante", "D: Filogenética"], correct: "A" },
                { type: 'mc', q: "Via ID/SC leva a:", options: ["A: Resposta humoral via linfonodos", "B: Celular via baço", "C: Mucosa oral", "D: Sem Ag"], correct: "A" },
                { type: 'mc', q: "Natureza do imunógeno inclui:", options: ["A: Composição química e heterogeneidade", "B: Apenas genótipo", "C: Dose irrelevante", "D: Sem adjuvantes"], correct: "A" },
                { type: 'mc', q: "Imunogenicidade é maior em Ag com:", options: ["A: Alta complexidade", "B: Baixa massa", "C: Homogeneidade", "D: Sem MHC"], correct: "A" },
                { type: 'mc', q: "Fatores como via de administração afetam:", options: ["A: Tipo de resposta (humoral/celular)", "B: Sem influência", "C: Apenas inata", "D: Tolerância sempre"], correct: "A" }
            ],
            section5: [
                { type: 'mc', q: "Haptenos são:", options: ["A: Antígenos de baixa MM, não imunogênicos sozinhos", "B: Sempre imunógenos", "C: Super Ag", "D: Adjuvantes"], correct: "A" },
                { type: 'mc', q: "Superantígenos ativam:", options: ["A: Até 25% de T policlonalmente", "B: Monoclonal", "C: Sem T", "D: Apenas B"], correct: "A" },
                { type: 'mc', q: "Estrutura básica de Ac: 2 cadeias leves e 2 pesadas", options: ["A: Verdadeiro", "B: 4 leves", "C: Sem constantes", "D: Apenas variáveis"], correct: "A" },
                { type: 'mc', q: "IgM é pentâmero para:", options: ["A: Alta avidez inicial", "B: Baixa afinidade", "C: Neonatal", "D: Mucosa"], correct: "A" },
                { type: 'mc', q: "Fc media funções efetoras como:", options: ["A: Complemento e ADCC", "B: Ligação Ag", "C: Variável apenas", "D: Sem MHC"], correct: "A" },
                { type: 'mc', q: "Afinidade é força de ligação de:", options: ["A: Um sítio Fab-Ag", "B: Múltiplos sítios", "C: Avidez total", "D: Sem mutação"], correct: "A" },
                { type: 'mc', q: "Avidez é maior em IgM que IgG devido a:", options: ["A: Múltiplos sítios de ligação", "B: Um sítio apenas", "C: Baixa MM", "D: Sem classe"], correct: "A" },
                { type: 'mc', q: "ADCC envolve:", options: ["A: NK via CD16 e IgG", "B: Complemento", "C: Fagocitose neutrófilos", "D: Sem Ac"], correct: "A" },
                { type: 'mc', q: "Hapteno + carreador torna:", options: ["A: Imunogênico", "B: Não antigênico", "C: Super Ag", "D: Adjuvante"], correct: "A" },
                { type: 'mc', q: "Superantígenos ligam fora do sulco MHC:", options: ["A: Ativando T inespecíficos", "B: Específicos como Ag convencional", "C: Sem APC", "D: Apenas B"], correct: "A" },
                { type: 'mc', q: "Classes de Ac: IgA para:", options: ["A: Mucosas", "B: Parasitas", "C: Neonatal", "D: BCR"], correct: "A" },
                { type: 'mc', q: "IgE media:", options: ["A: Hipersensibilidade e parasitas", "B: Complemento", "C: Opsonização", "D: Sem Fc"], correct: "A" },
                { type: 'mc', q: "Fragmento Fab é para:", options: ["A: Ligação Ag", "B: Efetores", "C: Fc", "D: Ambas"], correct: "A" },
                { type: 'mc', q: "Papaína cliva Ac em:", options: ["A: 2 Fab + Fc", "B: F(ab')2", "C: Sem fragmentos", "D: Inteiro"], correct: "A" },
                { type: 'mc', q: "Acs podem causar:", options: ["A: Alergias e autoimunes", "B: Sem patologias", "C: Apenas infecções", "D: Tolerância"], correct: "A" },
                { type: 'mc', q: "Superantígenos incluem toxinas de:", options: ["A: Staphylococcus e Streptococcus", "B: Apenas vírus", "C: Fungos isolados", "D: Sem bactérias"], correct: "A" },
                { type: 'mc', q: "IgG é principal para:", options: ["A: Opsonização e neonatal", "B: Mucosa", "C: Alergia", "D: BCR naïve"], correct: "A" },
                { type: 'mc', q: "Mecanismos de Ac incluem:", options: ["A: Neutralização e complemento em superfície", "B: Solúvel isolado", "C: Sem Ag", "D: Inata apenas"], correct: "A" },
                { type: 'mc', q: "Haptenos de origem sintética como:", options: ["A: Níquel em alergia de contato", "B: Proteínas", "C: Super Ag", "D: Adjuvantes"], correct: "A" },
                { type: 'mc', q: "Avidez aumenta com:", options: ["A: Multivalência e afinidade", "B: Univalência", "C: Sem mutação somática", "D: Baixa MM"], correct: "A" },
                { type: 'mc', q: "Acs em diagnósticos são usados em:", options: ["A: Testes como ELISA", "B: Sem imagem", "C: Apenas tratamento", "D: Vacinas"], correct: "A" },
                { type: 'mc', q: "Imunidade passiva usa:", options: ["A: Anticorpos monoclonais", "B: Sem soros", "C: Ativa natural", "D: Memória"], correct: "A" }
            ],
            section6: [ // 20 questões abertas (nível avançado, baseadas nos slides)
                { type: 'open', q: "Explique as funções principais do Sistema Imune e como a tolerância previne autoimunidade.", keywords: ["resistência infecções", "tolerância", "rejeição transplantes", "controle tumores", "autoimunidade"] },
                { type: 'open', q: "Descreva diferenças entre imunidade inata e adaptativa, incluindo tempo de resposta.", keywords: ["inata constitutiva imediata", "adaptativa específica memória", "inflamação", "expansão clonal"] },
                { type: 'open', q: "Discuta como fatores como idade e estresse influenciam a resposta à vacinação.", keywords: ["fatores intrínsecos", "extrínsecos", "microbiota", "estresse psicológico", "vacinação"] },
                { type: 'open', q: "Explique imunidade ativa vs passiva, com exemplos naturais e artificiais.", keywords: ["ativa infecção imunização", "passiva gestação soros", "natural artificial"] },
                { type: 'open', q: "Descreva o papel dos linfócitos T CD4+ e CD8+ na resposta imune celular.", keywords: ["CD4 helper", "CD8 citotóxico", "cooperação", "MHC classe II I"] },
                { type: 'open', q: "Explique a maturação de linfócitos B na medula óssea e T no timo.", keywords: ["medula B", "timo T", "receptores BCR TCR", "seleção negativa"] },
                { type: 'open', q: "Discuta funções de macrófagos e células dendríticas como APCs.", keywords: ["macrófagos fagocitose", "dendríticas apresentação Ag", "MHC coestimuladores"] },
                { type: 'open', q: "Descreva órgãos linfoides secundários e seu papel na resposta imune.", keywords: ["linfonodos filtragem", "baço polpa branca vermelha", "MALT GALT"] },
                { type: 'open', q: "Explique como neutrófilos e eosinófilos contribuem para defesa.", keywords: ["neutrófilos fagocitose bactérias", "eosinófilos parasitas alergia"] },
                { type: 'open', q: "Discuta o impacto da esplenectomia na imunidade.", keywords: ["esplenectomia risco encapsulados", "pneumococcus meningococcus", "filtração sangue"] },
                { type: 'open', q: "Defina antígeno e explique por que receptores inatos não estão na definição.", keywords: ["antígeno BCR TCR", "ligação específica", "inata inespecífica"] },
                { type: 'open', q: "Descreva tipos de antígenos (estranhos vs auto) e exemplos.", keywords: ["estranhos patógenos microbiota", "auto próprios tolerados"] },
                { type: 'open', q: "Explique o conceito de epítopo e sua importância na resposta imune.", keywords: ["epítopo região específica", "determinante antigênico", "induz resposta"] },
                { type: 'open', q: "Discuta antigenicidade vs imunogenicidade, com exemplos.", keywords: ["antigenicidade ligação", "imunogenicidade induz resposta", "haptenos não imunogênicos"] },
                { type: 'open', q: "Explique fatores como massa molecular e complexidade na imunogenicidade.", keywords: ["massa 100k Da", "complexidade heterogeneidade", "epítopos múltiplos"] },
                { type: 'open', q: "Descreva como dose e via de administração afetam a resposta imune.", keywords: ["dose ideal tolerância alta", "via EV baço celular", "ID humoral linfonodos"] },
                { type: 'open', q: "Discuta o papel de adjuvantes na imunogenicidade.", keywords: ["adjuvantes persistência inflamação", "coestimuladores proliferação"] },
                { type: 'open', q: "Explique haptenos e como se tornam imunogênicos.", keywords: ["haptenos baixa MM", "carreador proteína", "alergia contato níquel"] },
                { type: 'open', q: "Descreva superantígenos e sua diferença de Ag convencionais.", keywords: ["superantígenos policlonal 25% T", "fora sulco MHC", "toxina choque"] },
                { type: 'open', q: "Explique estrutura de anticorpos, incluindo domínios variáveis e constantes.", keywords: ["2 leves 2 pesadas", "VH VL CH CL", "Fab Fc"] }
            ]
        };
        // Função para gerar perguntas aleatórias (5 MC por seção, todas 20 abertas)
        function generateQuestions(sectionId, pool) {
            const numToGenerate = sectionId === 'section6' ? pool.length : 5;
            const shuffled = shuffle([...pool]).slice(0, numToGenerate);
            const container = document.getElementById(`questions${sectionId.slice(-1)}`);
            shuffled.forEach((item, index) => {
                const qDiv = document.createElement('div');
                qDiv.classList.add('question');
                qDiv.dataset.type = item.type;
                if (item.type === 'mc') {
                    qDiv.dataset.correct = item.correct;
                    const p = document.createElement('p');
                    p.textContent = item.q;
                    qDiv.appendChild(p);
                    const optionsDiv = document.createElement('div');
                    optionsDiv.classList.add('options');
                    item.options.forEach(opt => {
                        const [value, text] = opt.split(': ');
                        const btn = document.createElement('button');
                        btn.classList.add('option');
                        btn.dataset.value = value;
                        btn.textContent = opt;
                        optionsDiv.appendChild(btn);
                    });
                    qDiv.appendChild(optionsDiv);
                } else { // open
                    qDiv.dataset.keywords = item.keywords.join(',');
                    const p = document.createElement('p');
                    p.textContent = item.q;
                    qDiv.appendChild(p);
                    const textarea = document.createElement('textarea');
                    textarea.classList.add('open-answer');
                    textarea.placeholder = 'Digite sua resposta aqui...';
                    qDiv.appendChild(textarea);
                }
                container.appendChild(qDiv);
            });
        }
        // Gerar perguntas ao carregar
        window.addEventListener('load', () => {
            generateQuestions('section1', questionPools.section1);
            generateQuestions('section2', questionPools.section2);
            generateQuestions('section3', questionPools.section3);
            generateQuestions('section4', questionPools.section4);
            generateQuestions('section5', questionPools.section5);
            generateQuestions('section6', questionPools.section6);
            // Adicionar event listeners para seleção (MC)
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('option')) {
                    const options = e.target.parentElement.querySelectorAll('.option');
                    options.forEach(opt => opt.classList.remove('selected'));
                    e.target.classList.add('selected');
                }
            });
        });
        function checkAnswers(sectionId) {
            const section = document.getElementById(sectionId);
            const questions = section.querySelectorAll('.question');
            let correctCount = 0;
            let totalQuestions = 0;
            let errors = [];
            questions.forEach((q, index) => {
                totalQuestions++;
                if (q.dataset.type === 'mc') {
                    const selected = q.querySelector('.option.selected');
                    const correct = q.dataset.correct;
                    if (selected && selected.dataset.value === correct) {
                        correctCount++;
                    } else {
                        const questionText = q.querySelector('p').textContent;
                        const selectedValue = selected ? selected.textContent : 'Nenhuma selecionada';
                        const correctOption = Array.from(q.querySelectorAll('.option')).find(opt => opt.dataset.value === correct).textContent;
                        errors.push(`${questionText} - Sua resposta: ${selectedValue} (Errada). Correta: ${correctOption}`);
                    }
                } else { // open
                    const answer = q.querySelector('.open-answer').value.toLowerCase().trim();
                    const keywords = q.dataset.keywords.split(',').map(k => k.toLowerCase().trim());
                    const matches = keywords.filter(kw => answer.includes(kw)).length;
                    if (matches >= 2) { // Pelo menos 2 keywords para "correto"
                        correctCount++;
                    } else {
                        const questionText = q.querySelector('p').textContent;
                        errors.push(`${questionText} - Resposta parcial/errada. Sugestão: Inclua termos como ${keywords.slice(0,3).join(', ')}...`);
                    }
                }
            });
            const feedback = document.getElementById(`feedback${sectionId.slice(-1)}`);
            feedback.innerHTML = `<span class="${correctCount === totalQuestions ? 'correct' : 'incorrect'}">Você acertou ${correctCount} de ${totalQuestions} questões.</span>`;
            const result = document.getElementById(`result${sectionId.slice(-1)}`);
            result.style.display = 'block';
            if (errors.length === 0) {
                result.innerHTML = '<p class="correct">Todas corretas! Parabéns!</p>';
            } else {
                result.innerHTML = '<h3>Erros Detalhados:</h3><ul>' + errors.map(err => `<li>${err}</li>`).join('') + '</ul>';
            }
        }
    </script>
</body>
</html>
